(function($,window,undefined){var $mod=$('#mod-filter-hero');if($mod.length!==1)return;if($(".content > h1 + h3",$mod).length){$(".content > h1",$mod).css("font-size","50px");$(".content > h1",$mod).css("letter-spacing","1px");if(!$(".content > h3 + p",$mod).length){var btnOffset=$(".content a.btn",$mod).offset().top,height_variance=($(".content",$mod).outerHeight()-$(".content a.btn",$mod).height())/2;height_variance=((btnOffset-$mod.offset().top)/2)-height_variance;$(".content > h3",$mod).css("margin-bottom",height_variance)}}})(jQuery,this);(function($,window,undefined){$('.video-container').each(function(idx){var $videoContainer=$(this),$timeData=$('.time-restriction',this).attr('data-time-restriction');$timeData=$timeData?$.parseJSON($timeData.replace(/'/g,'"')):false;$.createVideo($videoContainer);var video=$videoContainer.data('video');video.attach('log',function(evt){window.log('FLASH LOG: '+evt.message)});video.attach('error',function(evt){window.log('FLASH ERROR: '+evt.message)});video.attach('buffer',function(evt){window.log('BUFFERING: status: '+evt.status);switch(evt.status){case ('buffering'):{if($videoContainer.find('.buffering').length===1)return;$videoContainer.append('<span class="buffering"></span>');break};case ('complete'):{$videoContainer.find('.buffering').remove();break}}});if(window.Touch)$videoContainer.find('> video').css('left','-9999px');var onPosterClick=function(evt){var $this=$(this),video=$this.parent().data('video');video.play();$this.remove()};if(!window.Touch){$videoContainer.find('> .poster').click(onPosterClick)}else{$videoContainer.find('> video').css('left','-9999px');$videoContainer.find('> .poster').bind('touchstart',onPosterClick)};$videoContainer.find('> .controls > .play-pause').click(function(evt){if($(this).hasClass('disabled'))return;video.togglePlayPause()});$videoContainer.find('> .controls > .embed').click(function(evt){if($(this).hasClass('disabled'))return;if(video.state==='playing'){video.pause();video.wasPlaying=true};$videoContainer.find('> .embed').show();$videoContainer.find('> .embed textarea').get(0).select()});$videoContainer.find('> .embed textarea').click(function(evt){$(this).get(0).select()});$videoContainer.find('> .embed .close').click(function(evt){$videoContainer.find('> .embed').hide();if(video.wasPlaying){video.play();video.wasPlaying=false}});$videoContainer.find('> .embed > .close').click(function(evt){$videoContainer.find('> .embed').hide();video.play()});video.attach('play',function(evt){$videoContainer.find('> .controls > .play-pause').removeClass('play').addClass('pause')});video.attach('pause',function(evt){$videoContainer.find('> .controls > .play-pause').removeClass('pause').addClass('play')});var isTimeSliding=false,onTimeSlideStart=function(evt,ui){isTimeSliding=true},onTimeSlideStop=function(evt,ui){isTimeSliding=false;video.setCurrentTime(ui.value)},canPlay=false,hasMetaData=false;video.attach('metadata',function(evt){hasMetaData=true;window.log('onmetadata:: '+video.durationSeconds+', '+video.duration);$videoContainer.find('> .controls > .slider-time').slider({min:0,max:video.durationSeconds,value:0,range:'min',disabled:(!(canPlay&&hasMetaData)),start:onTimeSlideStart,stop:onTimeSlideStop}).append('<div class="buffer-progress"></div>')});video.attach('canplay',function(evt){canPlay=true;if(window.Touch)$videoContainer.find('> video').css('left','0');$videoContainer.find('> .controls > .play-pause').removeClass('disabled');$videoContainer.find('> .controls > .embed').removeClass('disabled');$videoContainer.find('> .controls > .mute').removeClass('disabled');$videoContainer.find('> .controls > .sq-hq').removeClass('disabled');$videoContainer.find('> .controls > .fullscreen').removeClass('disabled');if(hasMetaData)$videoContainer.find('> .controls > .slider-time').slider('option','disabled',false);$videoContainer.find('> .controls > .volume > .slider-volume').slider('option','disabled',false);$videoContainer.find('.subtitles:first');if($subtitles.length===1)$videoContainer.find('> .controls > .cc').removeClass('disabled').addClass('on');$videoContainer.find('> .controls > .slider-time').mouseover(function(evt1){var mouseRelPosX=evt1.pageX-(this.offsetLeft+$videoContainer.offset().left),mouseoverTime=video.formatTime(video.durationSeconds*(mouseRelPosX/$(this).width()));$(this).attr('title',mouseoverTime)})});video.attach('progress',function(evt){$videoContainer.find('> .controls > .slider-time > .buffer-progress').css('width',(evt.percent+'%'))});video.attach('timeupdate',function(evt){if(isTimeSliding)return;var formattedTime=video.formatTime(evt.currentTime);$videoContainer.find('> .controls > .slider-time').slider('option','value',evt.currentTime);$videoContainer.find('> .controls > .time').text(formattedTime)});$videoContainer.find('> .controls > .mute').click(function(evt){if($(this).hasClass('disabled'))return;video.toggleMute()});video.attach('mutechange',function(evt){if(evt.muted){$videoContainer.find('> .controls > .mute').addClass('muted')}else $videoContainer.find('> .controls > .mute').removeClass('muted')});var lastVolume=100;$videoContainer.find('> .controls > .volume > .slider-volume').slider({min:0,max:100,value:100,range:'min',disabled:true,slide:function(evt,ui){lastVolume=ui.value;video.setVolume(ui.value)}});video.attach('mutechange',function(evt){if(evt.muted){$videoContainer.find('> .controls > .volume > .slider-volume').slider('option','value',0).slider('option','disabled',true)}else $videoContainer.find('> .controls > .volume > .slider-volume').slider('option','disabled',false).slider('option','value',lastVolume)});var $subtitles=$videoContainer.find('.subtitles:first');if($subtitles.length===1){var closedCaptionsOn=false;$videoContainer.find('> .controls > .cc').click(function(evt){if($(this).hasClass('disabled'))return;video.toggleClosedCaptions()});video.attach('closedcaptionschange',function(evt){if(closedCaptionsOn===evt.on)return;closedCaptionsOn=evt.on;var $btn=$videoContainer.find('> .controls > .cc'),$captions=$videoContainer.find('> .subtitles');if(closedCaptionsOn){$btn.addClass('on');$captions.show()}else{closedCaptionsOn=false;$btn.removeClass('on');$captions.hide()}});video.attach('timeupdate',function(evt){if(!closedCaptionsOn)return;var $captions=$videoContainer.find('> .subtitles'),ignoreIdx;$captions.find('li:visible').each(function(idx){var $li=$(this),data=new Function('return '+$li.data('subtitle'))();if(evt.playTime<data.startTime||evt.playTime>(data.startTime+data.duration)){ignoreIdx=idx;$li.fadeOut(100);return false}});$captions.find('li:hidden').each(function(idx){if(idx===ignoreIdx)return true;var $li=$(this),data=new Function('return '+$li.data('subtitle'))();if(evt.playTime>=data.startTime&&evt.playTime<(data.startTime+data.duration)){$li.fadeIn(100);return false}})})};$videoContainer.find('> .controls > .sq-hq').click(function(evt){if($(this).hasClass('disabled'))return;video.toggleQuality()});video.attach('qualitychange',function(evt){var $btn=$videoContainer.find('> .controls > .sq-hq');if(evt.mode==='sd'){$btn.removeClass('on')}else $btn.addClass('on')});$videoContainer.find('> .controls > .fullscreen').click(function(evt){if($(this).hasClass('disabled'))return;video.toggleFullScreen()});video.attach('fullscreenchange',function(evt){var $btn=$videoContainer.find('> .controls > .fullscreen');if(evt.on){$btn.addClass('on')}else $btn.removeClass('on')});var $ageGate=$videoContainer.find('> .age-gate');if($ageGate.length===1){var setAge=function(){var month=parseInt($.trim($ageGate.find('select.month').val())),day=parseInt($.trim($ageGate.find('select.day').val())),year=parseInt($.trim($ageGate.find('select.year').val()));EA.Restriction.get('age').setBirthDate(month,day,year)},isValidDate=function(){var month=parseInt($.trim($ageGate.find('select.month').val())||0),day=parseInt($.trim($ageGate.find('select.day').val())||0),year=parseInt($.trim($ageGate.find('select.year').val())||0);return EA.Restriction.get('age').isValidDate(month,day,year)},updateDate=function(evt,ui){if(isValidDate()){$ageGate.find('.btn-action').removeClass('disabled')}else $ageGate.find('.btn-action').addClass('disabled')};if(!window.Touch){$ageGate.find('select.month').selectmenu({width:80,menuWidth:80,maxHeight:125,positionOptions:{offset:'0 0'},change:updateDate,create:$.selectmenuCreate});$ageGate.find('select.day').selectmenu({width:70,menuWidth:70,maxHeight:125,positionOptions:{offset:'0 0'},change:updateDate,create:$.selectmenuCreate});$ageGate.find('select.year').selectmenu({width:70,menuWidth:70,maxHeight:125,positionOptions:{offset:'0 0'},change:updateDate,create:$.selectmenuCreate})}else{$ageGate.find('select.month').change(updateDate);$ageGate.find('select.day').change(updateDate);$ageGate.find('select.year').change(updateDate)};$ageGate.find('form').submit(function(evt){evt.preventDefault();if(isValidDate())setAge();return false});$ageGate.find('.btn-action').click(function(evt){evt.preventDefault();if($(this).hasClass('disabled'))return;setAge()});video.attach('restrictionchange',function(evt){if(evt.restriction!=='age')return;var $ageGate=$videoContainer.find('> .age-gate');if(evt.restricted){$ageGate.find('h3').hide();$ageGate.find('fieldset,.actions').hide();$ageGate.find('.message').fadeIn('fast')}else{$ageGate.remove();video.play()}});video.attach('destroy',function(evt){$videoContainer.find('> .controls > .play-pause').removeClass('pause').unbind('click');$videoContainer.find('> .controls > .mute').removeClass('muted').unbind('click');$videoContainer.find('> .controls > .embed').removeClass('on').unbind('click');$videoContainer.find('> .controls > .sq-hq').removeClass('on').unbind('click');$videoContainer.find('> .controls > .fullscreen').removeClass('on').unbind('click');$videoContainer.find('> .controls > .slider-time').slider('destroy').empty();$videoContainer.find('> .controls > .volume > .slider-volume').slider('destroy').empty()});if($.cookie('ea_video_mature')&&$.cookie('ea_video_mature')==='false'){video.notify({restriction:'age',type:'restrictionchange',restricted:true})}else if($.cookie('ea_video_mature')&&$.cookie('ea_video_mature')==='true')video.notify({restriction:'age',type:'restrictionchange',restricted:false})};if($timeData){video.attach('restrictionchange',function(evt){if(evt.restriction!=='time')return;var $timeGate=$videoContainer.find('> .time-restriction');if(evt.restricted)$timeGate.show()});var $now=parseInt($timeData.current.replace(/:/,"")),$start=parseInt($timeData.start.replace(/:/,"")),$end=parseInt($timeData.end.replace(/:/,""));$enableTimeGate=($start<$end)?($now>=$start&&$now<$end):($now<$end||$now>=$start);if($enableTimeGate)video.notify({restriction:'time',type:'restrictionchange',restricted:true})}})})(jQuery,this)